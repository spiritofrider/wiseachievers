{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Input, Output, EventEmitter } from '@angular/core';\nlet CareerProfilerComponent = class CareerProfilerComponent {\n  constructor() {\n    this.questionIncrement = new EventEmitter();\n    this.finalObj = new EventEmitter();\n    this.mainTestObject = [];\n    this.currentQuestion = 0;\n    this.preferenceObject = {\n      'id': '',\n      'question': '',\n      'FirstPreferance': '',\n      'SecondPreferance': '',\n      'ThirdPreferance': '',\n      'FirstPreferanceIndex': null,\n      'SecondPreferanceIndex': null,\n      'ThirdPreferanceIndex': null\n    };\n  }\n\n  ngOnInit() {}\n\n  ngOnChanges() {\n    console.log(this.submissionPart);\n\n    if (!this.submissionPart) {\n      this.resetPreferenceObject();\n      this.currentQuestion = 0;\n      this.mainTestObject = [];\n    }\n  }\n\n  nextQuestion() {\n    if (this.currentQuestion < this.TestQuiz.length - 1) {\n      this.currentQuestion += 1;\n      this.CheckBoxLogicCommon();\n    }\n\n    console.log(this.mainTestObject);\n  }\n\n  prevQues() {\n    if (this.currentQuestion > 0) {\n      this.currentQuestion -= 1;\n    }\n\n    this.CheckBoxLogicCommon();\n  }\n\n  CheckBoxLogicCommon() {\n    this.resetPreferenceObject();\n    this.questionIncrement.emit(this.currentQuestion);\n    const filledQues = this.mainTestObject.find(e => e.id == this.TestQuiz[this.currentQuestion].qno);\n\n    if (filledQues) {\n      setTimeout(() => {\n        if (filledQues['FirstPreferanceIndex']) {\n          document.getElementById(`f${filledQues['FirstPreferanceIndex']}`)['checked'] = true;\n        }\n\n        if (filledQues['SecondPreferanceIndex']) {\n          document.getElementById(`s${filledQues['SecondPreferanceIndex']}`)['checked'] = true;\n        }\n\n        if (filledQues['ThirdPreferanceIndex']) {\n          document.getElementById(`t${filledQues['ThirdPreferanceIndex']}`)['checked'] = true;\n        }\n      }, 0);\n    }\n  }\n\n  preferenceSelection(type, e, index) {\n    const filledQues = this.mainTestObject.find(e => e['id'] == this.TestQuiz[this.currentQuestion].qno);\n\n    if (filledQues) {\n      this.preferenceObject = filledQues;\n    }\n\n    this.preferenceObject['question'] = this.TestQuiz[this.currentQuestion].question;\n    this.preferenceObject['id'] = this.TestQuiz[this.currentQuestion].qno;\n\n    if (type == 'First') {\n      if (!!this.preferenceObject.FirstPreferanceIndex) {\n        document.getElementById(`f${this.preferenceObject['FirstPreferanceIndex']}`)['checked'] = false;\n      }\n\n      if (this.preferenceObject['SecondPreferanceIndex'] == index) {\n        this.preferenceObject['SecondPreferanceIndex'] = null;\n      }\n\n      if (this.preferenceObject['ThirdPreferanceIndex'] == index) {\n        this.preferenceObject['ThirdPreferanceIndex'] = null;\n      }\n\n      this.preferenceObject['FirstPreferanceIndex'] = index;\n      this.preferenceObject['FirstPreferance'] = e['target']['defaultValue'];\n    } else if (type == 'Second') {\n      if (!!this.preferenceObject.SecondPreferanceIndex) {\n        document.getElementById(`s${this.preferenceObject['SecondPreferanceIndex']}`)['checked'] = false;\n      }\n\n      if (this.preferenceObject['FirstPreferanceIndex'] == index) {\n        this.preferenceObject['FirstPreferanceIndex'] = null;\n      }\n\n      if (this.preferenceObject['ThirdPreferanceIndex'] == index) {\n        this.preferenceObject['ThirdPreferanceIndex'] = null;\n      }\n\n      this.preferenceObject['SecondPreferanceIndex'] = index;\n      this.preferenceObject['SecondPreferance'] = e['target']['defaultValue'];\n    } else if (type == 'Third') {\n      if (!!this.preferenceObject.ThirdPreferanceIndex) {\n        document.getElementById(`t${this.preferenceObject['ThirdPreferanceIndex']}`)['checked'] = false;\n      }\n\n      if (this.preferenceObject['FirstPreferanceIndex'] == index) {\n        this.preferenceObject['FirstPreferanceIndex'] = null;\n      }\n\n      if (this.preferenceObject['SecondPreferanceIndex'] == index) {\n        this.preferenceObject['SecondPreferanceIndex'] = null;\n      }\n\n      this.preferenceObject['ThirdPreferanceIndex'] = index;\n      this.preferenceObject['ThirdPreferance'] = e['target']['defaultValue'];\n    }\n\n    console.log(\"preferance object\", this.preferenceObject);\n\n    if (Object.values(this.preferenceObject).every(v => v)) {\n      let filledQues = this.mainTestObject.filter(e => e['id'] == this.TestQuiz[this.currentQuestion].qno);\n      console.log('filled Ques', filledQues);\n\n      if (filledQues.length < 1) {\n        this.mainTestObject.push(this.preferenceObject);\n      } else {\n        this.mainTestObject.map(obj => filledQues.find(o => o.id === obj.id) || obj);\n      }\n    }\n\n    console.log('main object:', this.mainTestObject);\n    this.finalObj.emit(this.mainTestObject);\n  }\n\n  resetPreferenceObject() {\n    this.preferenceObject = {\n      'id': '',\n      'question': '',\n      'FirstPreferance': '',\n      'SecondPreferance': '',\n      'ThirdPreferance': '',\n      'FirstPreferanceIndex': null,\n      'SecondPreferanceIndex': null,\n      'ThirdPreferanceIndex': null\n    };\n  }\n\n};\n\n__decorate([Input()], CareerProfilerComponent.prototype, \"TestQuiz\", void 0);\n\n__decorate([Input()], CareerProfilerComponent.prototype, \"submissionPart\", void 0);\n\n__decorate([Output()], CareerProfilerComponent.prototype, \"questionIncrement\", void 0);\n\n__decorate([Output()], CareerProfilerComponent.prototype, \"finalObj\", void 0);\n\nCareerProfilerComponent = __decorate([Component({\n  selector: 'app-career-profiler',\n  templateUrl: './career-profiler.component.html',\n  styleUrls: ['./career-profiler.component.scss']\n})], CareerProfilerComponent);\nexport { CareerProfilerComponent };","map":null,"metadata":{},"sourceType":"module"}